"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2182],{1202:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>r});var t=a(5893),s=a(1151);const i={sidebar_position:15},d="JSON Session Format",c={id:"JSON-Session-Format",title:"JSON Session Format",description:"Schemas",source:"@site/docs/JSON-Session-Format.md",sourceDirName:".",slug:"/JSON-Session-Format",permalink:"/docs/JSON-Session-Format",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JSON-Session-Format.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"XR Integration",permalink:"/docs/XR-Integration"},next:{title:"License",permalink:"/docs/License"}},o={},r=[{value:"Schemas",id:"schemas",level:2},{value:"Assets",id:"assets",level:2},{value:"Applications",id:"applications",level:2},{value:"Example",id:"example",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"json-session-format",children:"JSON Session Format"}),"\n",(0,t.jsx)(n.h2,{id:"schemas",children:"Schemas"}),"\n",(0,t.jsx)(n.p,{children:"Here is defined the file format to store the content of a board, including asset definitions and application states."}),"\n",(0,t.jsxs)(n.p,{children:["The base of the schema for the collection (",(0,t.jsx)(n.code,{children:"zod"})," definition):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export const SBSchema = z.object({\n  _id: z.string(),\n  _createdAt: z.number(),\n  _updatedAt: z.number(),\n  _updatedBy: z.string(),\n  _createdBy: z.string(),\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"The application instance schema is:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export type AppSchema = {\n  title: string;\n  roomId: string;\n  boardId: string;\n  position: Position;    // { x: z.number(), y: z.number(), z: z.number() }\n  rotation: Rotation;    // { x: z.number(), y: z.number(), z: z.number() }\n  size: Size;            // { width: z.number(), height: z.number(), depth: z.number() }\n  type: AppName;         // string, set of all the application names\n  state: AppState;       // Application specific schema\n  raised: boolean;\n  dragging: boolean;\n  pinned: boolean;\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The application collection stores a union of ",(0,t.jsx)(n.code,{children:"SBSchema"})," and ",(0,t.jsx)(n.code,{children:"AppSchema"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export type App = SBDoc & { data: AppSchema };\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Each application defines its own ",(0,t.jsx)(n.code,{children:"AppState"}),". For instance, the ",(0,t.jsx)(n.code,{children:"Stickie"})," application schema is:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export const schema = z.object({\n  text: z.string(),\n  fontSize: z.number(),\n  color: z.string(),\n  lock: z.boolean(),\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["So the ",(0,t.jsx)(n.code,{children:"s3json"})," file format for now is defined as an array of assets and an array of apps:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "assets": [],\n  "apps": []\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"assets",children:"Assets"}),"\n",(0,t.jsx)(n.p,{children:"Assets are pre-defined because they are loaded by some applications. An asset is:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'{\n   "id": "3ab878bf-e001-4cfa-b845-39fe31627df8",  // UUID\n   "url": "http://example.com/file.jpg",          // a public URL where it can be downloaded\n   "filename": "2017-05-23 16.59.17.jpg"          // a filename\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"applications",children:"Applications"}),"\n",(0,t.jsx)(n.p,{children:"Applications are dumped from the data collection:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'    {\n      "_id": "cdd91b9e-5baa-410d-9b99-07c41c6c2af5",\n      "_createdAt": 1709585019165,\n      "_createdBy": "0fefb25a-1431-4258-8eb8-71c240abf0b1",\n      "_updatedAt": 1709585034551,\n      "_updatedBy": "0fefb25a-1431-4258-8eb8-71c240abf0b1",\n      "data": {\n        "title": "Luc",\n        "roomId": "521f75cc-0a02-4ae2-8f3f-0b190bc2b1a0",\n        "boardId": "93590012-544d-4691-8df8-ef5e92713ae3",\n        "position": {\n          "x": 1494351,\n          "y": 1499951,\n          "z": 0\n        },\n        "size": {\n          "width": 728,\n          "height": 121,\n          "depth": 0\n        },\n        "rotation": { "x": 0, "y": 0, "z": 0 },\n        "type": "Stickie",\n        "state": {\n          "text": "Todos for next week",\n          "fontSize": 48,\n          "color": "pink",\n          "lock": false,\n        },\n        "raised": false,\n        "dragging": false,\n        "pinned": false\n      }\n    },\n'})}),"\n",(0,t.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,t.jsxs)(n.p,{children:["Hence a full example of a ",(0,t.jsx)(n.code,{children:".s3json"})," file is:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "assets": [\n    {\n      "id": "96999240-2b64-4f45-b31f-91040e15bf4a",\n      "url": "http://localhost:4200/api/files/96999240-2b64-4f45-b31f-91040e15bf4a/3b3155b4-0aaa-5b19-898b-c912256f8463",\n      "filename": "Community Presentation 2021.pdf"\n    },\n    {\n      "id": "3ab878bf-e001-4cfa-b845-39fe31627df8",\n      "url": "http://localhost:4200/api/files/3ab878bf-e001-4cfa-b845-39fe31627df8/5cd70f15-9f71-5cc3-9806-93e77456701c",\n      "filename": "2017-05-23 16.59.17.jpg"\n    }\n  ],\n  "apps": [\n    {\n      "_id": "eb318e96-7425-4f4c-b5ff-38e1c3306112",\n      "_createdAt": 1699398754569,\n      "_createdBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "_updatedAt": 1699398775242,\n      "_updatedBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "data": {\n        "title": "Community Presentation 2021.pdf - 1 of 10",\n        "roomId": "1276086a-b8d9-4a74-83e0-45dfca4c0a9c",\n        "boardId": "07cc3d9e-e766-4eb2-9961-6a82b0d31a7e",\n        "position": {\n          "x": 1504176,\n          "y": 1501889,\n          "z": 0\n        },\n        "size": {\n          "width": 400,\n          "height": 224.96,\n          "depth": 0\n        },\n        "rotation": {\n          "x": 0,\n          "y": 0,\n          "z": 0\n        },\n        "type": "PDFViewer",\n        "state": {\n          "assetid": "96999240-2b64-4f45-b31f-91040e15bf4a",\n          "currentPage": 0,\n          "numPages": 10,\n          "displayPages": 1,\n          "executeInfo": {\n            "executeFunc": "",\n            "params": {}\n          },\n          "analyzed": "",\n          "client": ""\n        },\n        "raised": false,\n        "dragging": false,\n        "pinned": false\n      }\n    },\n    {\n      "_id": "2464611c-51d3-42a8-90cd-52806adb1c74",\n      "_createdAt": 1699398774369,\n      "_createdBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "_updatedAt": 1699405663473,\n      "_updatedBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "data": {\n        "title": "Luc Renambot",\n        "roomId": "1276086a-b8d9-4a74-83e0-45dfca4c0a9c",\n        "boardId": "07cc3d9e-e766-4eb2-9961-6a82b0d31a7e",\n        "position": {\n          "x": 1504530,\n          "y": 1501485,\n          "z": 0\n        },\n        "size": {\n          "width": 400,\n          "height": 216,\n          "depth": 0\n        },\n        "rotation": {\n          "x": 0,\n          "y": 0,\n          "z": 0\n        },\n        "type": "Stickie",\n        "state": {\n          "text": "Note 1",\n          "fontSize": 36,\n          "color": "yellow",\n          "lock": false,\n          "executeInfo": {\n            "executeFunc": "",\n            "params": {}\n          }\n        },\n        "raised": false,\n        "dragging": false,\n        "pinned": false\n      }\n    },\n    {\n      "_id": "04365291-9664-4b46-affc-5fc7a4c51690",\n      "_createdAt": 1699398754569,\n      "_createdBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "_updatedAt": 1699407884319,\n      "_updatedBy": "733cef8b-b464-4de1-a160-dd1bf89620b8",\n      "data": {\n        "title": "2017-05-23 16.59.17.jpg",\n        "roomId": "1276086a-b8d9-4a74-83e0-45dfca4c0a9c",\n        "boardId": "07cc3d9e-e766-4eb2-9961-6a82b0d31a7e",\n        "position": {\n          "x": 1504627,\n          "y": 1501919,\n          "z": 0\n        },\n        "size": {\n          "width": 400,\n          "height": 253.125,\n          "depth": 0\n        },\n        "rotation": {\n          "x": 0,\n          "y": 0,\n          "z": 0\n        },\n        "type": "ImageViewer",\n        "state": {\n          "executeInfo": {\n            "executeFunc": "",\n            "params": {}\n          },\n          "assetid": "3ab878bf-e001-4cfa-b845-39fe31627df8",\n          "annotations": false,\n          "boxes": {}\n        },\n        "raised": false,\n        "dragging": false,\n        "pinned": false\n      }\n    }\n  ]\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1151:(e,n,a)=>{a.d(n,{Z:()=>c,a:()=>d});var t=a(7294);const s={},i=t.createContext(s);function d(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);